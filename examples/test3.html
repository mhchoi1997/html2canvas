<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script src="./media/dom-to-image.js" type="text/javascript"></script>
        <script src="../dist/html2canvas.js"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.js"></script> -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.js"></script> -->
        <link rel="stylesheet" href="./common.css" />
        <style>
            .virtual-element {
        position: relative;
        display: block;
        width: 100%;
        max-width: 700px;
      }

      .virtual-element::before,
      .virtual-element::after {
        position: absolute;
        display: block;
        content: "";
        width: 37px;
        height: 32px;
        top: 50%;
        margin-top: -16px;
      }

      .virtual-element::before {
        left: 0;
        background-image: url("./media/lake.jpg");
      }

      .virtual-element::after {
        right: 0;
        background-image: url("./media/lake.jpg");
      }
        </style>
    </head>
    <body>
        <button id="btnHtml">HTML2CAVANS - SVG</button>
        <button id="btnHtml_canvas">HTML2CAVANS - CANVAS</button>
        <button id="btnDom">DOM-TO-IMAGE</button>
        <p class="virtual-element">
      가상요소로 텍스트 앞, 뒤 이미지 넣기<br />
      가상 요소자를 사용하면 HTML 구조를 변경하지 않고도 스타일을 적용할 수
      있고<br />
      요소를 동적으로 생성하거나 특정 위치에 스타일을 추가할 수 있어서 구조의
      유연성 있다는데<br />
      어떨 때 사용하면 효율이 높을까? 그냥 HTML을 직접 생성하는 것과 비교했을
      때의 이점이 언제 존재할까?
    </p>
        <div
            style="width: 200px; height: 200px; background: repeating-linear-gradient(white, yellow 20px, green 40px)"
        ></div>
        <div>
            <p>background-blend-mode</p>
            <div id="background-blend-mode" class="test3">
                <p>background-blend-mode</p>
            </div>
        </div>
        <div>
            <p>box-shadow</p>
            <div id="test1"></div>
            <div id="test2"></div>
        </div>
        <div>
            <p>font-feature-setting</p>
            <div id="example-element" style="font-feature-settings: 'liga' 0">
                <p>Difficult waffles</p>
                <table>
                    <tbody>
                        <tr>
                            <td><span class="tabular">0O</span></td>
                        </tr>
                        <tr>
                            <td><span class="tabular">3.14</span></td>
                        </tr>
                        <tr>
                            <td><span class="tabular">2.71</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div>
            <p>box-decoration-break</p>
            <span class="span1"
                ><b>inline-slice</b> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
                Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
                galley of type and scrambled it to make a type specimen book.
            </span>
        </div>

        <div id="capture" style="padding: 10px">
            <div>
                <h4 style="color: #000">Hello world!</h4>
            </div>
            <div>
                <p>text</p>
                <input type="text" />
            </div>
            <div>
                <p>password</p>
                <input type="password" />
            </div>
            <div>
                <p>number</p>
                <input type="number" />
            </div>
            <div>
                <p>email</p>
                <input type="email" />
            </div>
            <div>
                <p>tel</p>
                <input type="tel" />
            </div>
            <div>
                <p>search</p>
                <input type="search" />
            </div>
            <div>
                <p>button(input)</p>
                <input type="button" value="input" />
                <input type="submit" />
                <input type="reset" />
            </div>
            <div>
                <p>checkbox</p>
                <input type="checkbox" />
            </div>
            <div>
                <p>radio</p>
                <input type="radio" id="a1" name="radio" />
                <input type="radio" id="a2" name="radio" />
            </div>
            <div>
                <p>date</p>
                <input type="date" name="" id="" />
            </div>
            <div>
                <p>range</p>
                <input type="range" name="" id="" />
            </div>
            <input type="file" />
            <div><p>file</p></div>
            <div>
                <p>textarea</p>
                <textarea name="" id=""></textarea>
            </div>
            <div>
                <p>svg</p>
                <svg width="250" height="200">
                    <rect
                        width="200"
                        height="150"
                        x="20"
                        y="20"
                        rx="20"
                        ry="20"
                        stroke="orange"
                        stroke-width="5"
                        fill="yellow"
                    />
                </svg>
            </div>
            <div>
                <p>select</p>
                <select name="" id="">
                    <option value="a1">A1</option>
                    <option value="a2">A2</option>
                </select>
            </div>
            <div>
                <p>로컬 리소스</p>
                <div style="display: flex">
                    <div>
                        <img width="300" height="300" src="./media/a.png" alt="임시 이미지" />
                        <img src="./media/happy.svg" alt="" srcset="" width="300" height="300" />
                    </div>
                    <div>
                        <video width="300" height="300" src="./media/flower.webm" controls></video>
                    </div>
                    <div>
                        <audio width="300" height="300" controls src="./media/t-rex-roar.mp3"></audio>
                    </div>
                </div>
            </div>
            <div>
                <p>외부 No-Cors</p>
                <div
                    style="
                        display: grid;
                        grid-template-columns: 300px 400px 400px 300px;
                        grid-template-rows: 300px;
                        gap: 20px;
                    "
                >
                    <!-- <div>
                        <img
                            id="temp1"
                            width="300"
                            height="300"
                            src="https://cdn.glitch.com/4c9ebeb9-8b9a-4adc-ad0a-238d9ae00bb5%2Fmdn_logo-only_color.svg?1535749917189"
                            alt="임시 이미지"
                            style="height: 100%; width: 100%; border: 2px dotted #888"
                        />
                    </div> -->
                    <!-- <div>
                        <video
                            width="400"
                            height="300"
                            src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm"
                            controls
                        ></video>
                    </div>
                    <div>
                        <video
                            width="400"
                            height="300"
                            src="https://grochtdreis.de/fuer-jsfiddle/video/sintel_trailer-480.mp4"
                            controls
                        ></video>
                    </div>
                    <div>
                        <audio
                            width="300"
                            height="300"
                            controls
                            src="https://interactive-examples.mdn.mozilla.net/media/cc0-audio/t-rex-roar.mp3"
                        ></audio>
                    </div> -->
                </div>
            </div>
        </div>
        <script>
            window.onload = function () {
                document.getElementById('btnHtml').addEventListener('click', () => {
                    console.time('timer');
                    let options = {
                        proxy : 'http://localhost:3000',
                        foreignObjectRendering: true,
                        allowTaint: true,
                    };
                    html2canvas(document.body, options).then((canvas) => {
                        const download = document.createElement('a');
                        download.display = 'none';
                        download.href = canvas.toDataURL();
                        download.download = 'html2canvas_canvas';
                        document.body.append(download);
                        download.click();
                        download.remove();
                        console.timeEnd('timer');
                    });
                });
                document.getElementById('btnHtml_canvas').addEventListener('click', () => {
                    console.time('timer');
                    let options = {
                        proxy : 'http://localhost:3000',
                    };
                    html2canvas(document.body, options).then((canvas) => {
                        const download = document.createElement('a');
                        download.display = 'none';
                        download.href = canvas.toDataURL();
                        download.download = 'html2canvas_canvas';
                        document.body.append(download);
                        download.click();
                        download.remove();
                        console.timeEnd('timer');
                    });
                });
                document.getElementById('btnDom').addEventListener('click', () => {
                    domtoimage
                        .toPng(document.body)
                        .then((imageUrl) => {
                            let image = new Image();
                            image.src = imageUrl;

                            image.onload = function () {
                                const anchor = document.createElement('a');
                                anchor.display = 'none';
                                anchor.href = imageUrl;
                                anchor.download = 'dom-to-image';
                                document.body.append(anchor);
                                anchor.click();
                                anchor.remove();
                            };
                        })
                        .catch((error) => {
                            console.log(error);
                        });
                });
            };
        </script>
    </body>
</html>
